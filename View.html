<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¦ç¿’è¨˜éŒ²ã‚¢ãƒ—ãƒª - é–²è¦§å°‚ç”¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ«ã¨é»’æ¿ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        body {
            font-family: 'Inter', sans-serif;
            /* é»’æ¿ã®èƒŒæ™¯è‰² */
            background-color: #1a202c; /* bg-gray-900 */
        }
        .blackboard-bg {
            background-color: #2d3748; /* bg-gray-800 */
            /* é»’æ¿ã®è³ªæ„Ÿã‚’æ¨¡å€£ã™ã‚‹å½±ã¨ãƒœãƒ¼ãƒ€ãƒ¼ */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border: 4px solid #a0522d; /* æ¿ƒã„èŒ¶è‰²ã®ãƒ•ãƒ¬ãƒ¼ãƒ  */
            position: relative;
            overflow: hidden; /* é»’æ¿ã®ãƒ†ã‚¯ã‚¹ãƒãƒ£ãŒã¯ã¿å‡ºã•ãªã„ã‚ˆã†ã« */
        }
        .blackboard-texture {
            /* é»’æ¿ã®ãƒãƒ§ãƒ¼ã‚¯ã®è·¡ã®ã‚ˆã†ãªãƒ†ã‚¯ã‚¹ãƒãƒ£ */
            position: absolute;
            inset: 0;
            background-image: url('https://placehold.co/100x100/333/555?text=chalk'); /* ãƒ€ãƒŸãƒ¼ã®ãƒ†ã‚¯ã‚¹ãƒãƒ£ç”»åƒ */
            background-repeat: repeat;
            opacity: 0.1; /* é€æ˜åº¦ã‚’ä¸‹ã’ã¦æ§ãˆã‚ã« */
            z-index: 0;
        }
        h1, h2, h3 {
            /* ãƒãƒ§ãƒ¼ã‚¯ã®ã‚ˆã†ãªãƒ†ã‚­ã‚¹ãƒˆã‚·ãƒ£ãƒ‰ã‚¦ */
            text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.4), -1px -1px 0px rgba(0, 0, 0, 0.2);
        }
        /* å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        input[type="number"], textarea {
            background-color: #3b4556; /* é–²è¦§å°‚ç”¨ã®èƒŒæ™¯è‰² */
            border: 1px solid #a0522d;
            color: #f6e05e;
            padding: 0.75rem;
            border-radius: 0.375rem;
            transition: all 0.2s ease-in-out;
            cursor: default; /* ã‚«ãƒ¼ã‚½ãƒ«ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«å¤‰æ›´ */
        }
        input[type="number"]:focus, textarea:focus {
            outline: none;
            ring: 0;
            border-color: #a0522d;
        }
        /* ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        input::placeholder, textarea::placeholder {
            color: #a0aec0;
        }
        /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º (é»’æ¿ã®è³ªæ„Ÿã‚’æ¨¡å€£) */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #4a4a4a;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4 sm:p-8">
    <div class="w-full max-w-4xl blackboard-bg rounded-lg p-6 sm:p-8">
        <div class="blackboard-texture"></div>

        <h1 class="text-3xl sm:text-4xl font-bold text-center mb-6 text-yellow-200 relative z-10">å­¦ç¿’è¨˜éŒ² </h1>

        <div class="flex justify-between items-center mb-8 relative z-10">
            <button id="prevWeekBtn" class="bg-amber-700 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-full shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                &lt; å‰ã®é€±
            </button>
            <span id="currentWeek" class="text-xl sm:text-2xl font-semibold text-yellow-200"></span>
            <button id="nextWeekBtn" class="bg-amber-700 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-full shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                æ¬¡ã®é€± &gt;
            </button>
        </div>

        <div id="weeklyView" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8 relative z-10">
            </div>

        <div id="dailyDetailView" class="hidden bg-gray-700 p-6 rounded-lg shadow-md border-2 border-amber-700 relative z-10">
            <h2 id="detailDayTitle" class="text-2xl sm:text-3xl font-bold mb-4 text-center text-yellow-200"></h2>

            <button id="backToWeeklyBtn" class="absolute top-4 left-4 bg-amber-700 hover:bg-amber-600 text-white font-bold py-1 px-3 rounded-full shadow-md transition duration-300 ease-in-out text-sm transform hover:scale-105">
                &lt; é€±è¡¨ç¤ºã«æˆ»ã‚‹
            </button>

            <div class="mb-6">
                <h3 class="text-lg font-semibold mb-2 text-yellow-200">ğŸ“š å­¦ç¿’æ™‚é–“ã®å†…è¨³</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div class="flex items-center space-x-2">
                        <label for="japaneseTime" class="w-16 text-yellow-200">å›½èª:</label>
                        <input type="number" id="japaneseHours" class="w-16 p-2 text-center" min="0" max="23" value="0" readonly>
                        <span class="text-sm text-yellow-200">æ™‚é–“</span>
                        <input type="number" id="japaneseMinutes" class="w-16 p-2 text-center" min="0" max="59" value="0" readonly>
                        <span class="text-sm text-yellow-200">åˆ†</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <label for="englishTime" class="w-16 text-yellow-200">è‹±èª:</label>
                        <input type="number" id="englishHours" class="w-16 p-2 text-center" min="0" max="23" value="0" readonly>
                        <span class="text-sm text-yellow-200">æ™‚é–“</span>
                        <input type="number" id="englishMinutes" class="w-16 p-2 text-center" min="0" max="59" value="0" readonly>
                        <span class="text-sm text-yellow-200">åˆ†</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <label for="mathTime" class="w-16 text-yellow-200">æ•°å­¦:</label>
                        <input type="number" id="mathHours" class="w-16 p-2 text-center" min="0" max="23" value="0" readonly>
                        <span class="text-sm text-yellow-200">æ™‚é–“</span>
                        <input type="number" id="mathMinutes" class="w-16 p-2 text-center" min="0" max="59" value="0" readonly>
                        <span class="text-sm text-yellow-200">åˆ†</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <label for="socialTime" class="w-16 text-yellow-200">ç¤¾ä¼š:</label>
                        <input type="number" id="socialHours" class="w-16 p-2 text-center" min="0" max="23" value="0" readonly>
                        <span class="text-sm text-yellow-200">æ™‚é–“</span>
                        <input type="number" id="socialMinutes" class="w-16 p-2 text-center" min="0" max="59" value="0" readonly>
                        <span class="text-sm text-yellow-200">åˆ†</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <label for="scienceTime" class="w-16 text-yellow-200">ç†ç§‘:</label>
                        <input type="number" id="scienceHours" class="w-16 p-2 text-center" min="0" max="23" value="0" readonly>
                        <span class="text-sm text-yellow-200">æ™‚é–“</span>
                        <input type="number" id="scienceMinutes" class="w-16 p-2 text-center" min="0" max="59" value="0" readonly>
                        <span class="text-sm text-yellow-200">åˆ†</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <label for="otherTime" class="w-16 text-yellow-200">ãã®ä»–:</label>
                        <input type="number" id="otherHours" class="w-16 p-2 text-center" min="0" max="23" value="0" readonly>
                        <span class="text-sm text-yellow-200">æ™‚é–“</span>
                        <input type="number" id="otherMinutes" class="w-16 p-2 text-center" min="0" max="59" value="0" readonly>
                        <span class="text-sm text-yellow-200">åˆ†</span>
                    </div>
                </div>
                <div class="mt-4 text-xl font-bold flex justify-end items-center text-yellow-200">
                    <span>åˆè¨ˆ:</span>
                    <span id="totalHours" class="ml-2">0</span>
                    <span class="text-sm mr-1">æ™‚é–“</span>
                    <span id="totalMinutes">0</span>
                    <span class="text-sm">åˆ†</span>
                </div>
            </div>

            <div class="mb-6">
                <label for="impression" class="block text-lg font-semibold mb-2 text-yellow-200">ğŸ’­ ä¸€è¨€æ„Ÿæƒ³</label>
                <textarea id="impression" class="w-full h-24 p-3 rounded-md text-gray-400" readonly placeholder="ä¸€è¨€æ„Ÿæƒ³ã¯ã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™"></textarea>
            </div>

            <div class="mb-6">
                <label for="teacherComment" class="block text-lg font-semibold mb-2 text-yellow-200">ğŸ‘¨â€ğŸ« æ•™å¸«ã‹ã‚‰ã®ã‚³ãƒ¡ãƒ³ãƒˆ</label>
                <textarea id="teacherComment" class="w-full h-24 p-3 rounded-md text-gray-400" readonly placeholder="æ•™å¸«ã‹ã‚‰ã®ã‚³ãƒ¡ãƒ³ãƒˆã¯ã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™"></textarea>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const weeklyView = document.getElementById('weeklyView');
            const dailyDetailView = document.getElementById('dailyDetailView');
            const detailDayTitle = document.getElementById('detailDayTitle');
            const backToWeeklyBtn = document.getElementById('backToWeeklyBtn');
            const currentWeekSpan = document.getElementById('currentWeek');
            const prevWeekBtn = document.getElementById('prevWeekBtn');
            const nextWeekBtn = document.getElementById('nextWeekBtn');

            // èª­ã¿å–ã‚Šå°‚ç”¨ã®è¦ç´ 
            const impressionTextarea = document.getElementById('impression');
            const teacherCommentTextarea = document.getElementById('teacherComment');

            // å­¦ç¿’æ™‚é–“å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è¦ç´  (èª­ã¿å–ã‚Šå°‚ç”¨ã ãŒã€å€¤ã®è¡¨ç¤ºã«ã¯ä½¿ã†)
            const subjectInputs = [
                { id: 'japanese', hours: document.getElementById('japaneseHours'), minutes: document.getElementById('japaneseMinutes') },
                { id: 'english', hours: document.getElementById('englishHours'), minutes: document.getElementById('englishMinutes') },
                { id: 'math', hours: document.getElementById('mathHours'), minutes: document.getElementById('mathMinutes') },
                { id: 'social', hours: document.getElementById('socialHours'), minutes: document.getElementById('socialMinutes') },
                { id: 'science', hours: document.getElementById('scienceHours'), minutes: document.getElementById('scienceMinutes') },
                { id: 'other', hours: document.getElementById('otherHours'), minutes: document.getElementById('otherMinutes') },
            ];
            const totalHoursSpan = document.getElementById('totalHours');
            const totalMinutesSpan = document.getElementById('totalMinutes');
            
            // ç¾åœ¨ã®é€±ã®é–‹å§‹æ—¥ (æœˆæ›œæ—¥ã‚’åŸºæº–)
            let currentWeekStart = new Date();
            currentWeekStart.setDate(currentWeekStart.getDate() - (currentWeekStart.getDay() + 6) % 7);

            // ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ (é–²è¦§ã®ã¿ã®ãŸã‚ã€åˆæœŸå€¤ã‚’è¨­å®š)
            const learningData = {
                // ä¾‹ã¨ã—ã¦ã€éå»ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š
                '2025-11-03': { 
                    // scheduleé …ç›®ã‚’å‰Šé™¤
                    impression: 'æ•°å­¦ã®é›£ã—ã„å•é¡Œã«æŒ‘æˆ¦ã§ãã¦é”æˆæ„ŸãŒã‚ã‚Šã¾ã—ãŸï¼', 
                    teacherComment: 'é ‘å¼µã‚ŠãŒä¼ã‚ã£ã¦ãã¾ã™ã€‚ã“ã®èª¿å­ã§ç¶šã‘ã¦ãã ã•ã„ï¼',
                    japanese: {h: 0, m: 30}, english: {h: 1, m: 0}, math: {h: 1, m: 30},
                    social: {h: 0, m: 0}, science: {h: 0, m: 0}, other: {h: 0, m: 0}
                },
                '2025-11-04': { 
                    // scheduleé …ç›®ã‚’å‰Šé™¤
                    impression: 'ç†ç§‘ã®ãƒ¬ãƒãƒ¼ãƒˆã«æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã—ãŸãŒã€ä¸å¯§ã«å–ã‚Šçµ„ã¿ã¾ã—ãŸã€‚', 
                    teacherComment: '',
                    japanese: {h: 0, m: 0}, english: {h: 0, m: 0}, math: {h: 0, m: 0},
                    social: {h: 0, m: 0}, science: {h: 2, m: 0}, other: {h: 0, m: 0}
                }
            };

            /**
             * æ—¥ä»˜ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ 'YYYYå¹´MæœˆDæ—¥' å½¢å¼ã®æ–‡å­—åˆ—ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ã¾ã™ã€‚
             */
            function formatDate(date) {
                return `${date.getFullYear()}å¹´${date.getMonth() + 1}æœˆ${date.getDate()}æ—¥`;
            }

            /**
             * æŒ‡å®šã•ã‚ŒãŸæ—¥ã®å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®åˆè¨ˆæ™‚é–“ã‚’åˆ†å˜ä½ã§è¨ˆç®—ã—ã¾ã™ã€‚
             */
            function calculateTotalMinutes(data) {
                let total = 0;
                subjectInputs.forEach(subject => {
                    if (data[subject.id]) {
                        total += (data[subject.id].h * 60) + data[subject.id].m;
                    }
                });
                return total;
            }

            /**
             * åˆè¨ˆå­¦ç¿’æ™‚é–“ã‚’è¨ˆç®—ã—ã€è¡¨ç¤ºã‚’æ›´æ–°ã—ã¾ã™ã€‚
             */
            function updateTotalLearningTime() {
                let totalMinutes = 0;
                subjectInputs.forEach(subject => {
                    const hours = parseInt(subject.hours.value) || 0;
                    const minutes = parseInt(subject.minutes.value) || 0;
                    totalMinutes += (hours * 60) + minutes;
                });

                totalHoursSpan.textContent = Math.floor(totalMinutes / 60);
                totalMinutesSpan.textContent = totalMinutes % 60;
            }

            /**
             * é¸æŠã•ã‚ŒãŸæ—¥ã®ãƒ‡ãƒ¼ã‚¿ã‚’è©³ç´°ãƒ“ãƒ¥ãƒ¼ã«ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚
             * @param {string} dateKey - æ—¥ä»˜ã‚­ãƒ¼ (YYYY-MM-DD)ã€‚
             */
            function loadDailyData(dateKey) {
                const data = learningData[dateKey] || {};

                // **scheduleTextareaã¸ã®è¨­å®šå‡¦ç†ã¯å‰Šé™¤**
                impressionTextarea.value = data.impression || 'ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“';
                teacherCommentTextarea.value = data.teacherComment || 'ã¾ã ã‚³ãƒ¡ãƒ³ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“';

                subjectInputs.forEach(subject => {
                    subject.hours.value = data[subject.id]?.h || 0;
                    subject.minutes.value = data[subject.id]?.m || 0;
                });

                updateTotalLearningTime(); // åˆè¨ˆæ™‚é–“ã‚’æ›´æ–°
            }
            
            /**
             * é€±é–“è¡¨ç¤ºã‚’æ›´æ–°ã—ã¾ã™ã€‚
             */
            function updateWeekDisplay() {
                const weekEnd = new Date(currentWeekStart);
                weekEnd.setDate(currentWeekStart.getDate() + 6);
                currentWeekSpan.textContent = `${formatDate(currentWeekStart)} - ${formatDate(weekEnd)}`;

                weeklyView.innerHTML = '';

                const dayNames = ['æœˆæ›œæ—¥', 'ç«æ›œæ—¥', 'æ°´æ›œæ—¥', 'æœ¨æ›œæ—¥', 'é‡‘æ›œæ—¥', 'åœŸæ›œæ—¥', 'æ—¥æ›œæ—¥'];
                for (let i = 0; i < 7; i++) {
                    const day = new Date(currentWeekStart);
                    day.setDate(currentWeekStart.getDate() + i);
                    const dateKey = day.toISOString().split('T')[0];

                    const data = learningData[dateKey];
                    const totalMins = data ? calculateTotalMinutes(data) : 0;
                    const hours = Math.floor(totalMins / 60);
                    const minutes = totalMins % 60;
                    
                    const impressionText = data?.impression ? `ä¸€è¨€æ„Ÿæƒ³: ${data.impression.substring(0, 15)}${data.impression.length > 15 ? '...' : ''}` : 'ä¸€è¨€æ„Ÿæƒ³: ãƒ‡ãƒ¼ã‚¿ãªã—';

                    const dayCardHtml = `
                        <div class="day-card bg-gray-700 p-4 rounded-lg shadow-md border-2 border-amber-700 cursor-pointer hover:bg-gray-600 transition duration-300 ease-in-out transform hover:scale-105" data-date="${dateKey}">
                            <h3 class="text-xl font-bold mb-2 text-yellow-200">${dayNames[i]}</h3>
                            <p class="text-sm text-yellow-200">å­¦ç¿’æ™‚é–“: ${hours}æ™‚é–“${minutes}åˆ†</p>
                            <p class="text-sm text-gray-400">${impressionText}</p>
                        </div>
                    `;
                    weeklyView.insertAdjacentHTML('beforeend', dayCardHtml);
                }

                // æ–°ã—ãç”Ÿæˆã•ã‚ŒãŸã‚«ãƒ¼ãƒ‰ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’å†å‰²ã‚Šå½“ã¦
                document.querySelectorAll('.day-card').forEach(card => {
                    card.addEventListener('click', () => {
                        const dateKey = card.dataset.date;
                        const dayName = dayNames[new Date(dateKey).getDay() === 0 ? 6 : new Date(dateKey).getDay() - 1];
                        detailDayTitle.textContent = `${dayName}ã®å­¦ç¿’è¨˜éŒ² (é–²è¦§)`;
                        weeklyView.classList.add('hidden');
                        dailyDetailView.classList.remove('hidden');
                        dailyDetailView.dataset.date = dateKey; 
                        loadDailyData(dateKey);
                    });
                });
            }

            // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            backToWeeklyBtn.addEventListener('click', () => {
                dailyDetailView.classList.add('hidden');
                weeklyView.classList.remove('hidden');
            });
            
            prevWeekBtn.addEventListener('click', () => {
                currentWeekStart.setDate(currentWeekStart.getDate() - 7);
                updateWeekDisplay();
            });

            nextWeekBtn.addEventListener('click', () => {
                currentWeekStart.setDate(currentWeekStart.getDate() + 7);
                updateWeekDisplay();
            });

            // åˆæœŸãƒ­ãƒ¼ãƒ‰
            updateWeekDisplay();
        });
    </script>
</body>
</html>